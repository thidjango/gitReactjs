{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n}; // Copyright (c) 2016 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d3Voronoi = require('d3-voronoi');\n\nvar _react = require('react');\n\nvar _animation = require('../../animation');\n\nvar _scalesUtils = require('../../utils/scales-utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar propTypes = _extends({}, (0, _scalesUtils.getScalePropTypesByAttribute)('x'), (0, _scalesUtils.getScalePropTypesByAttribute)('y'), (0, _scalesUtils.getScalePropTypesByAttribute)('size'), (0, _scalesUtils.getScalePropTypesByAttribute)('opacity'), (0, _scalesUtils.getScalePropTypesByAttribute)('color'), {\n  width: _propTypes2.default.number,\n  height: _propTypes2.default.number,\n  data: _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.array])),\n  onValueMouseOver: _propTypes2.default.func,\n  onValueMouseOut: _propTypes2.default.func,\n  onValueClick: _propTypes2.default.func,\n  onValueRightClick: _propTypes2.default.func,\n  onSeriesMouseOver: _propTypes2.default.func,\n  onSeriesMouseOut: _propTypes2.default.func,\n  onSeriesClick: _propTypes2.default.func,\n  onSeriesRightClick: _propTypes2.default.func,\n  onNearestX: _propTypes2.default.func,\n  onNearestXY: _propTypes2.default.func,\n  style: _propTypes2.default.object,\n  animation: _animation.AnimationPropType,\n  stack: _propTypes2.default.bool\n});\n\nvar defaultProps = {\n  className: '',\n  stack: false,\n  style: {}\n};\n\nvar AbstractSeries = function (_PureComponent) {\n  _inherits(AbstractSeries, _PureComponent);\n\n  function AbstractSeries() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AbstractSeries);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AbstractSeries.__proto__ || Object.getPrototypeOf(AbstractSeries)).call.apply(_ref, [this].concat(args))), _this), _this._seriesClickHandler = function (event) {\n      var onSeriesClick = _this.props.onSeriesClick;\n\n      if (onSeriesClick) {\n        onSeriesClick({\n          event: event\n        });\n      }\n    }, _this._seriesMouseOutHandler = function (event) {\n      var onSeriesMouseOut = _this.props.onSeriesMouseOut;\n\n      if (onSeriesMouseOut) {\n        onSeriesMouseOut({\n          event: event\n        });\n      }\n    }, _this._seriesMouseOverHandler = function (event) {\n      var onSeriesMouseOver = _this.props.onSeriesMouseOver;\n\n      if (onSeriesMouseOver) {\n        onSeriesMouseOver({\n          event: event\n        });\n      }\n    }, _this._seriesRightClickHandler = function (event) {\n      var onSeriesRightClick = _this.props.onSeriesRightClick;\n\n      if (onSeriesRightClick) {\n        onSeriesRightClick({\n          event: event\n        });\n      }\n    }, _this._valueClickHandler = function (d, event) {\n      var _this$props = _this.props,\n          onValueClick = _this$props.onValueClick,\n          onSeriesClick = _this$props.onSeriesClick;\n\n      if (onValueClick) {\n        onValueClick(d, {\n          event: event\n        });\n      }\n\n      if (onSeriesClick) {\n        onSeriesClick({\n          event: event\n        });\n      }\n    }, _this._valueMouseOutHandler = function (d, event) {\n      var _this$props2 = _this.props,\n          onValueMouseOut = _this$props2.onValueMouseOut,\n          onSeriesMouseOut = _this$props2.onSeriesMouseOut;\n\n      if (onValueMouseOut) {\n        onValueMouseOut(d, {\n          event: event\n        });\n      }\n\n      if (onSeriesMouseOut) {\n        onSeriesMouseOut({\n          event: event\n        });\n      }\n    }, _this._valueMouseOverHandler = function (d, event) {\n      var _this$props3 = _this.props,\n          onValueMouseOver = _this$props3.onValueMouseOver,\n          onSeriesMouseOver = _this$props3.onSeriesMouseOver;\n\n      if (onValueMouseOver) {\n        onValueMouseOver(d, {\n          event: event\n        });\n      }\n\n      if (onSeriesMouseOver) {\n        onSeriesMouseOver({\n          event: event\n        });\n      }\n    }, _this._valueRightClickHandler = function (d, event) {\n      var _this$props4 = _this.props,\n          onValueRightClick = _this$props4.onValueRightClick,\n          onSeriesRightClick = _this$props4.onSeriesRightClick;\n\n      if (onValueRightClick) {\n        onValueRightClick(d, {\n          event: event\n        });\n      }\n\n      if (onSeriesRightClick) {\n        onSeriesRightClick({\n          event: event\n        });\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(AbstractSeries, [{\n    key: 'onParentMouseMove',\n    value: function onParentMouseMove(event) {\n      var _props = this.props,\n          onNearestX = _props.onNearestX,\n          onNearestXY = _props.onNearestXY,\n          data = _props.data;\n\n      if (!onNearestX && !onNearestXY || !data) {\n        return;\n      }\n\n      if (onNearestXY) {\n        this._handleNearestXY(event);\n      } else {\n        this._handleNearestX(event);\n      }\n    }\n  }, {\n    key: 'onParentTouchMove',\n    value: function onParentTouchMove(e) {\n      e.preventDefault();\n      this.onParentMouseMove(e);\n    }\n  }, {\n    key: 'onParentTouchStart',\n    value: function onParentTouchStart(e) {\n      // prevent mouse event emulation\n      e.preventDefault();\n    }\n    /**\n     * Get the attr0 functor.\n     * @param {string} attr Attribute name.\n     * @returns {*} Functor.\n     * @private\n     */\n\n  }, {\n    key: '_getAttr0Functor',\n    value: function _getAttr0Functor(attr) {\n      return (0, _scalesUtils.getAttr0Functor)(this.props, attr);\n    }\n    /**\n     * Get attribute functor.\n     * @param {string} attr Attribute name\n     * @returns {*} Functor.\n     * @protected\n     */\n\n  }, {\n    key: '_getAttributeFunctor',\n    value: function _getAttributeFunctor(attr) {\n      return (0, _scalesUtils.getAttributeFunctor)(this.props, attr);\n    }\n    /**\n     * Get the attribute value if it is available.\n     * @param {string} attr Attribute name.\n     * @returns {*} Attribute value if available, fallback value or undefined\n     * otherwise.\n     * @protected\n     */\n\n  }, {\n    key: '_getAttributeValue',\n    value: function _getAttributeValue(attr) {\n      return (0, _scalesUtils.getAttributeValue)(this.props, attr);\n    }\n    /**\n     * Get the scale object distance by the attribute from the list of properties.\n     * @param {string} attr Attribute name.\n     * @returns {number} Scale distance.\n     * @protected\n     */\n\n  }, {\n    key: '_getScaleDistance',\n    value: function _getScaleDistance(attr) {\n      var scaleObject = (0, _scalesUtils.getScaleObjectFromProps)(this.props, attr);\n      return scaleObject ? scaleObject.distance : 0;\n    }\n  }, {\n    key: '_getXYCoordinateInContainer',\n    value: function _getXYCoordinateInContainer(event) {\n      var _props2 = this.props,\n          _props2$marginTop = _props2.marginTop,\n          marginTop = _props2$marginTop === undefined ? 0 : _props2$marginTop,\n          _props2$marginLeft = _props2.marginLeft,\n          marginLeft = _props2$marginLeft === undefined ? 0 : _props2$marginLeft;\n      var evt = event.nativeEvent,\n          currentTarget = event.currentTarget;\n      var rect = currentTarget.getBoundingClientRect();\n      var x = evt.clientX;\n      var y = evt.clientY;\n\n      if (evt.type === 'touchmove') {\n        x = evt.touches[0].pageX;\n        y = evt.touches[0].pageY;\n      }\n\n      return {\n        x: x - rect.left - currentTarget.clientLeft - marginLeft,\n        y: y - rect.top - currentTarget.clientTop - marginTop\n      };\n    }\n  }, {\n    key: '_handleNearestX',\n    value: function _handleNearestX(event) {\n      var _props3 = this.props,\n          onNearestX = _props3.onNearestX,\n          data = _props3.data;\n      var minDistance = Number.POSITIVE_INFINITY;\n      var value = null;\n      var valueIndex = null;\n\n      var coordinate = this._getXYCoordinateInContainer(event);\n\n      var xScaleFn = this._getAttributeFunctor('x');\n\n      data.forEach(function (item, i) {\n        var currentCoordinate = xScaleFn(item);\n        var newDistance = Math.abs(coordinate.x - currentCoordinate);\n\n        if (newDistance < minDistance) {\n          minDistance = newDistance;\n          value = item;\n          valueIndex = i;\n        }\n      });\n\n      if (!value) {\n        return;\n      }\n\n      onNearestX(value, {\n        innerX: xScaleFn(value),\n        index: valueIndex,\n        event: event.nativeEvent\n      });\n    }\n  }, {\n    key: '_handleNearestXY',\n    value: function _handleNearestXY(event) {\n      var _props4 = this.props,\n          onNearestXY = _props4.onNearestXY,\n          data = _props4.data;\n\n      var coordinate = this._getXYCoordinateInContainer(event);\n\n      var xScaleFn = this._getAttributeFunctor('x');\n\n      var yScaleFn = this._getAttributeFunctor('y'); // Create a voronoi with each node center points\n\n\n      var voronoiInstance = (0, _d3Voronoi.voronoi)().x(xScaleFn).y(yScaleFn);\n      var foundPoint = voronoiInstance(data).find(coordinate.x, coordinate.y);\n      var value = foundPoint.data;\n\n      if (!value) {\n        return;\n      }\n\n      onNearestXY(value, {\n        innerX: foundPoint[0],\n        innerY: foundPoint[1],\n        index: foundPoint.index,\n        event: event.nativeEvent\n      });\n    }\n    /**\n     * Click handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n    /**\n     * Mouse out handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n    /**\n     * Mouse over handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n    /**\n     * Right Click handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n    /**\n     * Click handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n    /**\n     * Mouse out handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n    /**\n     * Mouse over handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n    /**\n     * Right Click handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n  }], [{\n    key: 'getParentConfig',\n\n    /**\n     * Get a default config for the parent.\n     * @returns {Object} Empty config.\n     */\n    value: function getParentConfig() {\n      return {};\n    }\n    /**\n     * Tells the rest of the world that it requires SVG to work.\n     * @returns {boolean} Result.\n     */\n\n  }, {\n    key: 'requiresSVG',\n    get: function get() {\n      return true;\n    }\n  }]);\n\n  return AbstractSeries;\n}(_react.PureComponent);\n\nAbstractSeries.displayName = 'AbstractSeries';\nAbstractSeries.propTypes = propTypes;\nAbstractSeries.defaultProps = defaultProps;\nexports.default = AbstractSeries;","map":{"version":3,"sources":["D:/reactjs/test/node_modules/react-vis/dist/plot/series/abstract-series.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","_propTypes","require","_propTypes2","_interopRequireDefault","_d3Voronoi","_react","_animation","_scalesUtils","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","propTypes","getScalePropTypesByAttribute","width","number","height","data","arrayOf","oneOfType","object","array","onValueMouseOver","func","onValueMouseOut","onValueClick","onValueRightClick","onSeriesMouseOver","onSeriesMouseOut","onSeriesClick","onSeriesRightClick","onNearestX","onNearestXY","style","animation","AnimationPropType","stack","bool","defaultProps","className","AbstractSeries","_PureComponent","_ref","_temp","_this","_ret","_len","args","Array","_key","getPrototypeOf","apply","concat","_seriesClickHandler","event","_seriesMouseOutHandler","_seriesMouseOverHandler","_seriesRightClickHandler","_valueClickHandler","d","_this$props","_valueMouseOutHandler","_this$props2","_valueMouseOverHandler","_this$props3","_valueRightClickHandler","_this$props4","onParentMouseMove","_props","_handleNearestXY","_handleNearestX","onParentTouchMove","e","preventDefault","onParentTouchStart","_getAttr0Functor","attr","getAttr0Functor","_getAttributeFunctor","getAttributeFunctor","_getAttributeValue","getAttributeValue","_getScaleDistance","scaleObject","getScaleObjectFromProps","distance","_getXYCoordinateInContainer","_props2","_props2$marginTop","marginTop","undefined","_props2$marginLeft","marginLeft","evt","nativeEvent","currentTarget","rect","getBoundingClientRect","x","clientX","y","clientY","type","touches","pageX","pageY","left","clientLeft","top","clientTop","_props3","minDistance","Number","POSITIVE_INFINITY","valueIndex","coordinate","xScaleFn","forEach","item","currentCoordinate","newDistance","Math","abs","innerX","index","_props4","yScaleFn","voronoiInstance","voronoi","foundPoint","find","innerY","getParentConfig","get","PureComponent","displayName"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; // Copyright (c) 2016 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d3Voronoi = require('d3-voronoi');\n\nvar _react = require('react');\n\nvar _animation = require('../../animation');\n\nvar _scalesUtils = require('../../utils/scales-utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar propTypes = _extends({}, (0, _scalesUtils.getScalePropTypesByAttribute)('x'), (0, _scalesUtils.getScalePropTypesByAttribute)('y'), (0, _scalesUtils.getScalePropTypesByAttribute)('size'), (0, _scalesUtils.getScalePropTypesByAttribute)('opacity'), (0, _scalesUtils.getScalePropTypesByAttribute)('color'), {\n  width: _propTypes2.default.number,\n  height: _propTypes2.default.number,\n  data: _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.array])),\n  onValueMouseOver: _propTypes2.default.func,\n  onValueMouseOut: _propTypes2.default.func,\n  onValueClick: _propTypes2.default.func,\n  onValueRightClick: _propTypes2.default.func,\n  onSeriesMouseOver: _propTypes2.default.func,\n  onSeriesMouseOut: _propTypes2.default.func,\n  onSeriesClick: _propTypes2.default.func,\n  onSeriesRightClick: _propTypes2.default.func,\n  onNearestX: _propTypes2.default.func,\n  onNearestXY: _propTypes2.default.func,\n  style: _propTypes2.default.object,\n  animation: _animation.AnimationPropType,\n  stack: _propTypes2.default.bool\n});\n\nvar defaultProps = {\n  className: '',\n  stack: false,\n  style: {}\n};\n\nvar AbstractSeries = function (_PureComponent) {\n  _inherits(AbstractSeries, _PureComponent);\n\n  function AbstractSeries() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AbstractSeries);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AbstractSeries.__proto__ || Object.getPrototypeOf(AbstractSeries)).call.apply(_ref, [this].concat(args))), _this), _this._seriesClickHandler = function (event) {\n      var onSeriesClick = _this.props.onSeriesClick;\n\n      if (onSeriesClick) {\n        onSeriesClick({ event: event });\n      }\n    }, _this._seriesMouseOutHandler = function (event) {\n      var onSeriesMouseOut = _this.props.onSeriesMouseOut;\n\n      if (onSeriesMouseOut) {\n        onSeriesMouseOut({ event: event });\n      }\n    }, _this._seriesMouseOverHandler = function (event) {\n      var onSeriesMouseOver = _this.props.onSeriesMouseOver;\n\n      if (onSeriesMouseOver) {\n        onSeriesMouseOver({ event: event });\n      }\n    }, _this._seriesRightClickHandler = function (event) {\n      var onSeriesRightClick = _this.props.onSeriesRightClick;\n\n      if (onSeriesRightClick) {\n        onSeriesRightClick({ event: event });\n      }\n    }, _this._valueClickHandler = function (d, event) {\n      var _this$props = _this.props,\n          onValueClick = _this$props.onValueClick,\n          onSeriesClick = _this$props.onSeriesClick;\n\n      if (onValueClick) {\n        onValueClick(d, { event: event });\n      }\n      if (onSeriesClick) {\n        onSeriesClick({ event: event });\n      }\n    }, _this._valueMouseOutHandler = function (d, event) {\n      var _this$props2 = _this.props,\n          onValueMouseOut = _this$props2.onValueMouseOut,\n          onSeriesMouseOut = _this$props2.onSeriesMouseOut;\n\n      if (onValueMouseOut) {\n        onValueMouseOut(d, { event: event });\n      }\n      if (onSeriesMouseOut) {\n        onSeriesMouseOut({ event: event });\n      }\n    }, _this._valueMouseOverHandler = function (d, event) {\n      var _this$props3 = _this.props,\n          onValueMouseOver = _this$props3.onValueMouseOver,\n          onSeriesMouseOver = _this$props3.onSeriesMouseOver;\n\n      if (onValueMouseOver) {\n        onValueMouseOver(d, { event: event });\n      }\n      if (onSeriesMouseOver) {\n        onSeriesMouseOver({ event: event });\n      }\n    }, _this._valueRightClickHandler = function (d, event) {\n      var _this$props4 = _this.props,\n          onValueRightClick = _this$props4.onValueRightClick,\n          onSeriesRightClick = _this$props4.onSeriesRightClick;\n\n      if (onValueRightClick) {\n        onValueRightClick(d, { event: event });\n      }\n      if (onSeriesRightClick) {\n        onSeriesRightClick({ event: event });\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(AbstractSeries, [{\n    key: 'onParentMouseMove',\n    value: function onParentMouseMove(event) {\n      var _props = this.props,\n          onNearestX = _props.onNearestX,\n          onNearestXY = _props.onNearestXY,\n          data = _props.data;\n\n      if (!onNearestX && !onNearestXY || !data) {\n        return;\n      }\n      if (onNearestXY) {\n        this._handleNearestXY(event);\n      } else {\n        this._handleNearestX(event);\n      }\n    }\n  }, {\n    key: 'onParentTouchMove',\n    value: function onParentTouchMove(e) {\n      e.preventDefault();\n      this.onParentMouseMove(e);\n    }\n  }, {\n    key: 'onParentTouchStart',\n    value: function onParentTouchStart(e) {\n      // prevent mouse event emulation\n      e.preventDefault();\n    }\n\n    /**\n     * Get the attr0 functor.\n     * @param {string} attr Attribute name.\n     * @returns {*} Functor.\n     * @private\n     */\n\n  }, {\n    key: '_getAttr0Functor',\n    value: function _getAttr0Functor(attr) {\n      return (0, _scalesUtils.getAttr0Functor)(this.props, attr);\n    }\n\n    /**\n     * Get attribute functor.\n     * @param {string} attr Attribute name\n     * @returns {*} Functor.\n     * @protected\n     */\n\n  }, {\n    key: '_getAttributeFunctor',\n    value: function _getAttributeFunctor(attr) {\n      return (0, _scalesUtils.getAttributeFunctor)(this.props, attr);\n    }\n\n    /**\n     * Get the attribute value if it is available.\n     * @param {string} attr Attribute name.\n     * @returns {*} Attribute value if available, fallback value or undefined\n     * otherwise.\n     * @protected\n     */\n\n  }, {\n    key: '_getAttributeValue',\n    value: function _getAttributeValue(attr) {\n      return (0, _scalesUtils.getAttributeValue)(this.props, attr);\n    }\n\n    /**\n     * Get the scale object distance by the attribute from the list of properties.\n     * @param {string} attr Attribute name.\n     * @returns {number} Scale distance.\n     * @protected\n     */\n\n  }, {\n    key: '_getScaleDistance',\n    value: function _getScaleDistance(attr) {\n      var scaleObject = (0, _scalesUtils.getScaleObjectFromProps)(this.props, attr);\n      return scaleObject ? scaleObject.distance : 0;\n    }\n  }, {\n    key: '_getXYCoordinateInContainer',\n    value: function _getXYCoordinateInContainer(event) {\n      var _props2 = this.props,\n          _props2$marginTop = _props2.marginTop,\n          marginTop = _props2$marginTop === undefined ? 0 : _props2$marginTop,\n          _props2$marginLeft = _props2.marginLeft,\n          marginLeft = _props2$marginLeft === undefined ? 0 : _props2$marginLeft;\n      var evt = event.nativeEvent,\n          currentTarget = event.currentTarget;\n\n      var rect = currentTarget.getBoundingClientRect();\n      var x = evt.clientX;\n      var y = evt.clientY;\n      if (evt.type === 'touchmove') {\n        x = evt.touches[0].pageX;\n        y = evt.touches[0].pageY;\n      }\n      return {\n        x: x - rect.left - currentTarget.clientLeft - marginLeft,\n        y: y - rect.top - currentTarget.clientTop - marginTop\n      };\n    }\n  }, {\n    key: '_handleNearestX',\n    value: function _handleNearestX(event) {\n      var _props3 = this.props,\n          onNearestX = _props3.onNearestX,\n          data = _props3.data;\n\n      var minDistance = Number.POSITIVE_INFINITY;\n      var value = null;\n      var valueIndex = null;\n\n      var coordinate = this._getXYCoordinateInContainer(event);\n      var xScaleFn = this._getAttributeFunctor('x');\n\n      data.forEach(function (item, i) {\n        var currentCoordinate = xScaleFn(item);\n        var newDistance = Math.abs(coordinate.x - currentCoordinate);\n        if (newDistance < minDistance) {\n          minDistance = newDistance;\n          value = item;\n          valueIndex = i;\n        }\n      });\n      if (!value) {\n        return;\n      }\n      onNearestX(value, {\n        innerX: xScaleFn(value),\n        index: valueIndex,\n        event: event.nativeEvent\n      });\n    }\n  }, {\n    key: '_handleNearestXY',\n    value: function _handleNearestXY(event) {\n      var _props4 = this.props,\n          onNearestXY = _props4.onNearestXY,\n          data = _props4.data;\n\n\n      var coordinate = this._getXYCoordinateInContainer(event);\n      var xScaleFn = this._getAttributeFunctor('x');\n      var yScaleFn = this._getAttributeFunctor('y');\n\n      // Create a voronoi with each node center points\n      var voronoiInstance = (0, _d3Voronoi.voronoi)().x(xScaleFn).y(yScaleFn);\n\n      var foundPoint = voronoiInstance(data).find(coordinate.x, coordinate.y);\n      var value = foundPoint.data;\n\n      if (!value) {\n        return;\n      }\n      onNearestXY(value, {\n        innerX: foundPoint[0],\n        innerY: foundPoint[1],\n        index: foundPoint.index,\n        event: event.nativeEvent\n      });\n    }\n\n    /**\n     * Click handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n\n    /**\n     * Mouse out handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n\n    /**\n     * Mouse over handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n\n    /**\n     * Right Click handler for the entire series.\n     * @param {Object} event Event.\n     * @protected\n     */\n\n\n    /**\n     * Click handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n\n    /**\n     * Mouse out handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n\n    /**\n     * Mouse over handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n\n    /**\n     * Right Click handler for the specific series' value.\n     * @param {Object} d Value object\n     * @param {Object} event Event.\n     * @protected\n     */\n\n  }], [{\n    key: 'getParentConfig',\n\n    /**\n     * Get a default config for the parent.\n     * @returns {Object} Empty config.\n     */\n    value: function getParentConfig() {\n      return {};\n    }\n\n    /**\n     * Tells the rest of the world that it requires SVG to work.\n     * @returns {boolean} Result.\n     */\n\n  }, {\n    key: 'requiresSVG',\n    get: function get() {\n      return true;\n    }\n  }]);\n\n  return AbstractSeries;\n}(_react.PureComponent);\n\nAbstractSeries.displayName = 'AbstractSeries';\nAbstractSeries.propTypes = propTypes;\nAbstractSeries.defaultProps = defaultProps;\n\nexports.default = AbstractSeries;"]},"metadata":{},"sourceType":"script"}